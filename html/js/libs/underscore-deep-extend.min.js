((typeof module!=="undefined"&&function(m){module.exports=m()})||(typeof define==="function"&&function(m){define("underscoreDeepExtend",m)})||(function(m){window["underscoreDeepExtend"]=m()}))(function(){return function(_){return function underscoreDeepExtend(obj){var parentRE=/#{\s*?_\s*?}/,source,isAssign=function(oProp,sProp){return(_.isUndefined(oProp)||_.isNull(oProp)||_.isFunction(oProp)||_.isNull(sProp)||_.isDate(sProp))},procAssign=function(oProp,sProp,propName){return obj[propName]=_.clone(sProp)},hasRegex=function(oProp,sProp){return(_.isString(sProp)&&parentRE.test(sProp))},procRegex=function(oProp,sProp,propName){if(!_.isString(oProp)){}return obj[propName]=sProp.replace(parentRE,oProp)},hasArray=function(oProp,sProp){return(_.isArray(oProp)||_.isArray(sProp))},procArray=function(oProp,sProp,propName){if(!_.isArray(oProp)||!_.isArray(sProp)){throw new Error("Trying to combine an array with a non-array ("+propName+")")}var tmp=_.deepExtend(obj[propName],sProp);return obj[propName]=_.reject(tmp,_.isNull)},hasObject=function(oProp,sProp){return(_.isObject(oProp)||_.isObject(sProp))},procObject=function(oProp,sProp,propName){if(!_.isObject(oProp)||!_.isObject(sProp)){throw new Error("Trying to combine an object with a non-object ("+propName+")")}return obj[propName]=_.deepExtend(oProp,sProp)},procMain=function(propName){var oProp=obj[propName],sProp=source[propName];if(isAssign(oProp,sProp)){procAssign(oProp,sProp,propName)}else{if(hasRegex(oProp,sProp)){procRegex(oProp,sProp,propName)}else{if(hasArray(oProp,sProp)){procArray(oProp,sProp,propName)}else{if(hasObject(oProp,sProp)){procObject(oProp,sProp,propName)}else{obj[propName]=procAssign(oProp,sProp,propName)}}}}},extendObject=function(src){source=src;Object.keys(source).forEach(procMain)};_.each(Array.prototype.slice.call(arguments,1),extendObject);return obj}}});